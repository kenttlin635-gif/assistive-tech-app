name: 同步試算表資料
on:
  schedule:
    - cron: '0 0 * * *' # 每天午夜同步
  workflow_dispatch:      # 允許手動點擊同步

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: 檢查程式碼
        uses: actions/checkout@v3

      - name: 下載最新的 CSV
        run: |
          # 請將下面的 URL 替換成你在「階段一」複製的 CSV 連結
          curl -L "https://docs.google.com/spreadsheets/d/e/2PACX-1vSvy-kOyofS0g9Z0Mrt7TVKHT_LdgwEyIc7eCdrFm7b0euMRag4SMy_ND_QvlNcrmxmHmYvA77KEgsY/pub?output=csv" -o data.csv

      - name: 自動提交資料更新
        run: |
          git config --global user.name "DataBot"
          git config --global user.email "bot@github.com"
          git add data.csv
          git commit -m "自動更新補助資料" || exit 0
          git push
